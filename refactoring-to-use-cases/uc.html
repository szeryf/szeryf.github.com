<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Refactoring to use-cases</title>
  <meta name="viewport" content="width=1024, user-scalable=no">
  <link rel="stylesheet" href="./deck.js/core/deck.core.css">
  <link rel="stylesheet" href="./deck.js/extensions/goto/deck.goto.css">
  <link rel="stylesheet" href="./deck.js/extensions/menu/deck.menu.css">
  <link rel="stylesheet" href="./deck.js/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" href="./deck.js/extensions/status/deck.status.css">
  <link rel="stylesheet" href="./deck.js/extensions/hash/deck.hash.css">
  <link rel="stylesheet" id="style-theme-link" href="./deck.js/themes/style/neon.css">
  <link rel="stylesheet" id="transition-theme-link" href="./deck.js/themes/transition/fade.css">
  <link rel="stylesheet" href="./deck.js/extensions/codemirror/deck.codemirror.css">
  <link rel="stylesheet" href="./deck.js/extensions/codemirror/themes/night.css">
  <script src="./deck.js/modernizr.custom.js"></script>
  <script src="http://ligature-js.googlecode.com/files/ligature.js"></script>

  <style>
    pre {
      color:#af0;
    }
    .CodeMirror-gutter {
      display: none;
    }
    body {
      font-variant-ligatures: common-ligatures additional-ligatures;
    }
    .slide h1 > img {
       margin-bottom: 0px
    }
    .opac6 {
      opacity: 0.6;
    }
    .opac4 {
      opacity: 0.4;
    }
    img.bg {
      /* Set rules to fill background */
      min-height: 100%;
      min-width: 1024px;

      /* Set up proportionate scaling */
      width: 100%;
      height: auto;

      /* Set up positioning */
      position: fixed;
      top: 0;
      left: 0;
    }

    @media screen and (max-width: 1024px) { /* Specific to this particular image */
      img.bg {
        left: 50%;
        margin-left: -512px;   /* 50% */
      }
    }
  </style>
</head>
<body class="deck-container">
  <section class="slide">
    <div class="vcenter">
      <h1>Refactoring to use-cases</h1>
      <h2>A case study</h2>
      <h3 class="slide">or:<br> Use-cases&mdash;The Lost Years</h3>
      <br>
      <br>
      <h4>Przemyslaw::Kowalczyk a.k.a. szeryf</h4>
    </div>
  </section>

  <section class="slide">
    <h1>
      <img src="http://2.gravatar.com/avatar/024f6d59fd34ceca04f3fc18a87bdb98?size=420">
      about me
    </h1>
  </section>

  <section class="slide">
    <h2>Table of contents</h2>
    <ol>
      <li>
        <h3>The traditional way</h3>
        <p>MVC considered harmful?!</p>
      </li>
      <li>
        <h3>The new way</h3>
        <p>DCI, Objects on Rails, Use-cases...</p>
      </li>
      <li>
        <h3>Case-study</h3>
        <p>Code or it didn't happen...</p>
      </li>
    </ol>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/b/bc/Vault_Boy.png" class="opac6">
      the traditional way
    </h1>
  </section>

  <section class="slide">
    <h1>
      MVC
      <span class="slide">
        <br>
        considered harmful?
        <img src="http://images4.wikia.nocookie.net/__cb20120515012304/fallout/images/1/1b/Pip_Boy_Bullseye.JPG" width="250em">
      </span>
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images1.wikia.nocookie.net/__cb20091116174712/fallout/images/5/5d/Jinxed.png" style="opacity:1;" width="250em">
      Rails made me do it
    </h1>
  </section>

  <section class="slide">
    <img class="vcenter" src="http://www.ayearwithoutcandy.com/wp-content/uploads/2010/10/fat-skinny2.jpg">
    <p>Jamis Buck, 2006</p>
  </section>

  <section class="slide">
    <img class="vcenter opac6" src="http://pu.i.wp.pl/k,NjcwMjA5MzQsNDY0MjkwNzk=,f,fat-girls-and-fries.jpg">
    <h1>
      <strong>obese</strong> model,
      <br>
      not so skinny controller
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/c/cd/Mad_Bomber_perk.png" class="opac6" width="250em">
      there's <strong>more</strong> than Model, View &amp; Controller
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/8/86/FB8_deco_3.png" width="250em" class="opac6">
      MVC makes use-cases difficult to <strong>read</strong>
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/7/7b/Bloody_Mess_FO3.png" class="opac6" width="400em">
      use-case spread over many files
    </h1>
  </section>

  <section class="slide">
    <h1>
      shotgun surgery
      <img src="http://images4.wikia.nocookie.net/__cb20101012145040/fallout/images/0/08/ShotgunSurgeon.png" class="opac6">
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images4.wikia.nocookie.net/__cb20110122230241/fallout/images/5/5b/CaesarLegionReputation.png" class="opac6" width="400em">
      cohesion
    </h1>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/e/e9/Beta_Software.png" class="opac6" width="250em">
      class has <strong>exactly&nbsp;one</strong> reason to change
    </h1>
    <p>Robert C. Martin, <em>Agile Software Development, Principles, Patterns, and Practices</em></p>
    
  </section>

  <section class="slide">
    <img src="http://images4.wikia.nocookie.net/__cb20090903122023/fallout/images/e/eb/VaultComputer.png" class="opac4 vcenter" width="500em">
    <h1>
      OOP makes use-cases difficult to <strong>read</strong>
    </h1>
  </section>

  <section class="slide">
    <img src="http://images.wikia.com/fallout/images/a/a7/Fallout_3_-_spawn_point_map.png" class="bg opac4">
    <h1>In OOP, everything happens somewhere else</h1>
    <p>Adele Goldberg</p>
  </section>

  <section class="slide">
    <img src="http://25.media.tumblr.com/tumblr_ljfdhvMAVA1qzs32ro1_500.jpg" class="vcenter opac4" width="640em">
    <h1>A new hope</h1>
  </section>

  <section class="slide">
    <h1>Data<br>Context<br>Interaction</h1>
  </section>

  <section class="slide">
    <h2>Data</h2>
    <ul>
      <li class="slide">
        <h3>What the system <strong>is</strong></h3>
      </li>
      <li class="slide">
        <h3>Tends to be stable</h3>
      </li>
      <li class="slide">
        <h3>Boring stuff</h3>
      </li>
      <li class="slide">
        <h3>Dumb data-structures, zero cleverness</h3>
      </li>
      <li class="slide">
        <h3>Used in different contexts!</h3>
        <p class="slide">...which may lead to obesity (in traditional way)</p>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>Context</h2>
    <ul>
      <li class="slide">
        <h3>Performs use-cases</h3>
        <ul>
          <li class="slide">or scenarios</li>
          <li class="slide">or algorithms</li>
          <li class="slide">or habits</li>
        </ul>
      </li>
      <li class="slide">
        <h3>Makes objects play roles</h3>
      </li>
      <li class="slide">
        <h3>Provides environment</h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>Interaction</h2>
    <ul>
      <li class="slide">
        <h3>What the system <strong>does</strong></h3>
      </li>
      <li class="slide">
        <h3>Tends to change rapidly</h3>
      </li>
      <li class="slide">
        <h3>Interesting stuff!</h3>
      </li>
      <li class="slide">
        <h3>Roles interacting with each other</h3>
      </li>
      <li class="slide">
        <h3>Usually not an actual object</h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>DCI in example</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
class Account
  attr_accessor :balance
end

class TransferMoneyContext
  def perform src_id, dst_id, amount
    src_act = AccountRepo.fetch(src_id)
    src_act.extend(TransferMoneySourceAccount)
    dst_act = AccountRepo.fetch(src_id)
    dst_act.extend(TransferMoneyDestinationAccount)
    
    src_act.transfer(amount, dst_act)
  end
end

class TransferMoneySourceAccount
  def transfer amount, dst_act
    if self.balance < amount
      raise InsufficientFunds.new
    else
      transaction do
        self.balance -= amount
        self.log("transfer out", Time.now, amount)
        dst_act.transfer_in(amount)
      end
    end
  end
end
    </textarea>
  </section>
    
  <section class="slide">
    <div class="vcenter">
      <h1>Architecture<br>The Lost Years</h2>
      <h3>by Uncle Bob Martin</h3>
      <a href="http://www.youtube.com/watch?v=WpkDN78P884">
          http://www.youtube.com/watch?v=WpkDN78P884
      </a>
    </div>
  </section>

  <section class="slide">
    <h1>use-cases are your application<span class="slide">,<br>Rails isn't</span></h1>
  </section>

  <section class="slide">
    <h2>Architecture according to Uncle Bob</h2>
    <ul>
      <li class="slide">
        <h3>Entity</h3>
        <p>Dumb data, application-<strong>independent</strong> business rules</p>
      </li>
      <li class="slide">
        <h3>Interactor</h3>
        <p>Application-<strong>specific</strong> business rules == use-cases</p>
      </li>
      <li class="slide">
        <h3>Delivery mechanism</h3>
        <p>Should be an implementation detail == a plugin</p>
      </li>
      <li class="slide">
        <h3>Persistence</h3>
        <p>Should be an implementation detail == a plugin</p>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>Architecture according to Uncle Bob &ndash; cont.</h2>
    <ul>
      <li class="slide">
        <h3>Isolated layers</h3>
      </li>
      <li class="slide">
        <h3>Communicating through simple data structures</h3>
      </li>
      <li class="slide">
        <h3>Views so simple there's no point in testing them</h3>
      </li>
      <li class="slide">
        <h3>The database is a detail!</h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h1>Good architecture allows to <strong>defer</strong> decisions</h1>
  </section>

  <section class="slide">
    <h1>...maximizes number of decisions <strong>not</strong> made</h1>
  </section>

  <section class="slide">
    <h2>It's Business Time by Jim Gay </h2>
    <ul>
      <li class="slide">
        <h3>Data model != Domain model</h3>
        <h3 class="slide">i.e. ActiveRecord::Base != models</h3>
      </li>
      <li class="slide">
        <h3>separate what is stable and what changes</h3>
      </li>
    </ul>
    <a href="http://www.youtube.com/watch?v=lhFSc0dWsto">
      Presented at wroc_love.rb: http://www.youtube.com/watch?v=lhFSc0dWsto
    </a>
  </section>

  <section class="slide">
    <h2>Objects on Rails</h2>
    <ul>
      <li class="slide">
        <h3>Single Responsibility Principle</h3>
      </li>
      <li class="slide">
        <h3>Dependency Injection in Ruby!</h3>
      </li>
      <li class="slide">
        <h3>de-couple as much as possible</h3>
      </li>
      <li class="slide">
        <h3>"lone wolf" anti-pattern</h3>
        <code>Post.find(id)</code>
        vs.
        <code>current_user.blog.posts.find(id)</code>
        <h4 class="slide">
          Coolest anti-pattern name since "shotgun surgery"!
        </h4>
      </li>
      <li class="slide">
        <h3>too much hassle with Exhibits</h3>
      </li>
    </ul>
    <a href="http://objectsonrails.com/">
      a must-read! => objectsonrails.com
    </a>
  </section>

  <section class="slide">
    <img class="vcenter" src="http://25.media.tumblr.com/tumblr_ljfdhvMAVA1qzs32ro1_500.jpg" style="opacity:0.4;" width="630em">
    <h1>A new hope</h1>
  </section>

  <section class="slide">
    <div class="vcenter">
      <h1>
        <img src="http://images1.wikia.nocookie.net/__cb20110809182237/fallout/images/thumb/c/c0/VaultBoyFO3.png/715px-VaultBoyFO3.png" class="opac6" width="250em">
        This will be mainstream in 5 years
      </h1>
      <h3 class="slide">(except Java)</h3>
    </div>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images.wikia.com/fallout/images/a/a9/Computer_Whiz.png" class="opac6" width="250em">
      examples
    </h1>
  </section>

  <section class="slide">
    <h1>
      <em>caveat emptor:</em>
      <br>
      <strong>work in progress</strong>
    </h1>
  </section>

  <section class="slide">
    <h1>
      before
      <img src="http://images.wikia.com/fallout/images/c/c1/Gun_Nut.png" class="opac6" width="250em">
    </h1>
  </section>

  <section class="slide">
    <h2>role.rb</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
class Role < ActiveRecord::Base

  belongs_to :user
  belongs_to :project
  ROLES = %w{creator member supervisor applicant follower}

  validates :role_type, :inclusion => ROLES

  after_create :notify_applicable_user, :unless => :accepted?

  state_machine :initial => :pending do
    state :pending, :accepted, :applied

    after_transition any => :accepted, :do => :create_activity_item
    after_transition :applied => :accepted, :do => :accept_applicant

    event :accept do
      transition :pending => :accepted
      #create_notification
    end

    event :accept_application do
      transition :applied => :accepted
    end
  end

  def self.create_roles(users, project)
    users.each do |user|
      Role.create!(:user => user, :project => project, :role_type => 'member')
    end
  end

  def self.create_member(user, project)
    Role.create!(:user => user, :project => project, :role_type => 'member', :state => 'accepted')
  end

  def self.create_owner(user, project)
    Role.create!(:user => user, :project => project, :role_type => 'creator', :state => 'accepted')
    project.create_activity_item
  end

  def self.create_follower(project, user)
    Role.create!(:user => user, :project => project, :role_type => 'follower', :state => 'accepted')
  end

  def self.create_user_follower(following_user, user)
    following_user.own_projects.each do |project|
      create_follower(project, user)
    end
  end

  def change!(value)
    update_attribute(:role_type, value)
  end

  def accept_applicant
    self.role_type = "member"
    self.save
  end

  private

    def notify_applicable_user
      if state == "pending" # user has been invited to join
        notify_user
      elsif state == "applied" # user has applied to join
        notify_project_owner
      end

    end

    def notify_user
      path    = Rails.application.routes.url_helpers.accept_project_role_path(project, self)
      subject = "You have been invited to project called #{project.name}"
      body    = "<a href=\"#{path}\">Accept invitation here</a>"
      Message.create_notification!(subject, body, user)
    end

    def notify_project_owner
      path    = Rails.application.routes.url_helpers.accept_application_project_role_path(project, self)
      subject = "#{user.name} would like to join your project called #{project.name}"
      body    = "To Accept <a href=\"/users/#{user.id}\">#{(user.name)}'s</a> application, <a href=\"#{path}\">click here</a>"
      Message.create_notification!(subject, body, self.project.owner)
    end

    def create_activity_item
      aid = ActivityItem.gen_aid

      # User has joined Project
      ActivityItem.create_item(subject: self.user, item: self, second_subject: self.project, description: "NEW", activity_identifier: aid)

      # Project owner has welcomed new user
      ActivityItem.create_item(subject: self.project.owner, item: self, second_subject: self.user, description: "WELCOME", activity_identifier: aid)
    end
end
    </textarea>
  </section>

  <section class="slide">
    <h1>
      <img src="http://images3.wikia.nocookie.net/__cb20120515011660/fallout/images/7/70/Pip_Boy_OMG.JPG" class="opac6" width="250em">
      Single Responsibility Principle?
    </h1>
  </section>

  <section class="slide">
    <h2>#1 Role is sending notifications!</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
after_create :notify_applicable_user, :unless => :accepted?

private
  def notify_applicable_user
    if state == "pending" # user has been invited to join
      notify_user
    elsif state == "applied" # user has applied to join
      notify_project_owner
    end
  end
    </textarea>
  </section>

  <section class="slide">
    <image class="vcenter" src="./20608737.jpg"/>
  </section>

  <section class="slide">
    <h2>#2 Role is producing HTML!</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
def notify_user
  path    = Rails.application.routes.url_helpers
              .accept_project_role_path(project, self)
  subject = "You have been invited to project called #{project.name}"
  body    = "&lt;a href=\"#{path}\">Accept invitation here&lt;/a>"
  Message.create_notification!(subject, body, user)
end

def notify_project_owner
  path    = Rails.application.routes.url_helpers
              .accept_application_project_role_path(project, self)
  subject = "#{user.name} would like to join your project called #{project.name}"
  body    = "To Accept &lt;a href=\"/users/#{user.id}\">#{(user.name)}'s&lt;/a>
                application, &lt;a href=\"#{path}\">click here&lt;/a>"
  Message.create_notification!(subject, body, self.project.owner)
end
    </textarea>
  </section>

  <section class="slide">
    <h2>#3 Role has a state machine</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
state_machine :initial => :pending do
  state :pending, :accepted, :applied

  after_transition any => :accepted, :do => :create_activity_item
  after_transition :applied => :accepted, :do => :accept_applicant

  event :accept do
    transition :pending => :accepted
    #create_notification
  end

  event :accept_application do
    transition :applied => :accepted
  end
end

def accept_applicant
  self.role_type = "member"
  self.save
end
    </textarea>
  </section>

  <section class="slide">
    <h2>#4 Role creates activity items</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
def create_activity_item
  aid = ActivityItem.gen_aid

  # User has joined Project
  ActivityItem.create_item(subject: self.user, item: self, second_subject:
               self.project, description: "NEW", activity_identifier: aid)

  # Project owner has welcomed new user
  ActivityItem.create_item(subject: self.project.owner, item: self, second_subject:
               self.user, description: "WELCOME", activity_identifier: aid)
end
    </textarea>
  </section>

  <section class="slide">
    <h2>#5 Role creates some stuff</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
def self.create_roles(users, project)
  users.each do |user|
    Role.create!(:user => user, :project => project, :role_type => 'member')
  end
end

def self.create_member(user, project)
  Role.create!(:user => user, :project => project, :role_type => 'member',
               :state => 'accepted')
end

def self.create_owner(user, project)
  Role.create!(:user => user, :project => project, :role_type => 'creator',
               :state => 'accepted')
  project.create_activity_item
end

def self.create_follower(project, user)
  Role.create!(:user => user, :project => project, :role_type => 'follower',
               :state => 'accepted')
end

def self.create_user_follower(following_user, user)
  following_user.own_projects.each do |project|
    create_follower(project, user)
  end
end
    </textarea>
  </section>

  <section class="slide">
    <h2>role.rb</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
    </textarea>
  </section>

  <section class="slide">
    <h2>role.rb</h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
    </textarea>
  </section>


  <section class="slide">
    <h1>PROS</h1>
  </section>

  <section class="slide">
    <h1>use-cases easy to follow</h1>
  </section>

  <section class="slide">
    <h1>easier to modify</h1>
  </section>

  <section class="slide">
    <h1>dependencies under control</h1>
  </section>

  <section class="slide">
    <h1>crazy fast tests</h1>
  </section>

  <section class="slide">
    <pre>
$ time rake test:usecases
# Running tests:

.................................

Finished tests in 0.056079s, 588.4556 tests/s, 1676.2068 assertions/s.

33 tests, 94 assertions, 0 failures, 0 errors, 0 skips

real	0m5.284s
user	0m4.243s
sys	0m0.946s
    </pre>
  </section>

  <section class="slide">
    <pre>
$ time rake test:units
# Running tests:

..................................................................................................................................................................

Finished tests in 33.363820s, 4.8855 tests/s, 8.5422 assertions/s.

163 tests, 285 assertions, 0 failures, 0 errors

real	0m51.735s
user	0m43.616s
sys	0m2.795s
</pre>
  </section>

  <section class="slide">
    <h1>CONS</h1>
  </section>
  <section class="slide">
    <h1>no Rails goodies</h1>
  </section>
  <section class="slide">
    <h1>tedious requires</h1>
  </section>
  <section class="slide">
    <h1>brittle tests?</h1>
  </section>

  <section class="slide">
    <h1>Thank you!</h1>
  </section>

  <section class="slide">
    <h2>Where do I find...</h2>
    <ul>
      <li>
        <h3>This presentation</h3>
        <a href="http://szeryf.github.com/refactoring-to-use-cases/uc.html">
          http://szeryf.github.com/refactoring-to-use-cases/uc.html
        </a>
      </li>
      <li>
        <h3>My github account</h2>
        <a href="http://github.com/szeryf">
          http://github.com/szeryf
        </a>
      </li>
      <li>
        <h3>My almost defunct blog</h2>
        <a href="http://szeryf.wordpress.com/">
          http://szeryf.wordpress.com/
        </a>
      </li>
    </div>
  </section>

  <section class="slide">
    <h1>CONS</h1>
  </section>
  <section class="slide">
    <h2>text</h2>
  </section>


  <section class="slide" id="how-to-overview">
    <h2>How to Make a Deck</h2>
    <ol>
      <li>
        <h3>Write Slides</h3>

        <p>Slide content is simple&nbsp;HTML.</p>
      </li>
      <li>
        <h3>Choose Themes</h3>
        <p>One for slide styles and one for deck&nbsp;transitions.</p>
      </li>

      <li>
        <h3>Include Extensions</h3>
        <p>Add extra functionality to your deck, or leave it stripped&nbsp;down.</p>
      </li>
    </ol>
  </section>

  <section class="slide" id="markup">
    <h2>The Markup</h2>
    <p>Slides are just HTML elements with a class of <code>slide</code>.</p>
    <pre><code>&lt;section class=&quot;slide&quot;&gt;
  &lt;h2&gt;How to Make a Deck&lt;/h2&gt;

  &lt;ol&gt;
    &lt;li&gt;
      &lt;h3&gt;Write Slides&lt;/h3&gt;
      &lt;p&gt;Slide content is simple HTML.&lt;/p&gt;
    &lt;/li&gt;

    &lt;li&gt;
      &lt;h3&gt;Choose Themes&lt;/h3&gt;
      &lt;p&gt;One for slide styles and one for deck transitions.&lt;/p&gt;
    &lt;/li&gt;
    &hellip;

  &lt;/ol&gt;
&lt;/section&gt;</code></pre>
  </section>





  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./deck.js/jquery-1.7.min.js"><\/script>')</script>

  <!-- Deck Core and extensions -->
  <script src="./deck.js/core/deck.core.js"></script>
  <script src="./deck.js/extensions/hash/deck.hash.js"></script>
  <script src="./deck.js/extensions/menu/deck.menu.js"></script>
  <script src="./deck.js/extensions/goto/deck.goto.js"></script>

  <script src="./deck.js/extensions/status/deck.status.js"></script>
  <script src="./deck.js/extensions/navigation/deck.navigation.js"></script>
  <!-- Base codemiror code -->
  <script src="./deck.js/extensions/codemirror/codemirror.js"></script>

  <!-- Syntax highlighting Modes see https://github.com/iros/deck.js-codemirror -->
  <!-- javascript -->
  <script src="./deck.js/extensions/codemirror/mode/javascript/javascript.js"></script>

  <!-- html mode (note html mode requires xml, css and javascript) -->
  <script src="./deck.js/extensions/codemirror/mode/xml/xml.js"></script>
  <script src="./deck.js/extensions/codemirror/mode/css/css.js"></script>
  <script src="./deck.js/extensions/codemirror/mode/htmlmixed/htmlmixed.js"></script>

  <!-- ruby -->
  <script src="./deck.js/extensions/codemirror/mode/ruby/ruby.js"></script>

  <!-- Plugin code -->
  <script src="./deck.js/extensions/codemirror/deck.codemirror.js"></script>

  <script>
    $(function() {
      $.deck('.slide');
    });
    $(document).ready(function () {
      //ligature();
    });
  </script>
</body>
</html>