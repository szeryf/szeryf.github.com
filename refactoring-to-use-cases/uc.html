<!DOCTYPE html> 
<html>
<head>
  <meta charset="utf-8">
  <title>Refactoring to use-cases</title>
  <meta name="viewport" content="width=1024, user-scalable=no">
  <link rel="stylesheet" href="./deck.js/core/deck.core.css">
  <link rel="stylesheet" href="./deck.js/extensions/goto/deck.goto.css">
  <link rel="stylesheet" href="./deck.js/extensions/menu/deck.menu.css">
  <link rel="stylesheet" href="./deck.js/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" href="./deck.js/extensions/status/deck.status.css">
  <link rel="stylesheet" href="./deck.js/extensions/hash/deck.hash.css">
  <link rel="stylesheet" id="style-theme-link" href="./deck.js/themes/style/neon.css">
  <link rel="stylesheet" id="transition-theme-link" href="./deck.js/themes/transition/fade.css">
  <script src="./deck.js/modernizr.custom.js"></script>
</head>
<body class="deck-container"> 
  <section class="slide" id="title-slide">
    <div class="vcenter"> 
      <h1>Refactoring to use-cases</h1>
      <h2>A case study</h2>
      <h3 class="slide">or:<br> Use-cases&mdash;The Lost Years</h3>
      <br>
      <br>
      <h4>Przemyslaw Kowalczyk a.k.a. szeryf</h4>      
    </div>
  </section>

  <section class="slide">
    <h1>me</h1>
  </section>
  
  <section class="slide" id="toc">
    <h2>Table of contents</h2>
    <ol>
      <li>
        <h3>The traditional way</h3>
      </li>
      <li>
        <h3>The new way</h3>
        <p>DCI, Objects on Rails, Use-cases...</p>
      </li>
      <li>
        <h3>Case-study</h3>
        <p>Show us the code, mother-f***!</p>
      </li>
    </ol>
  </section>
  
  <section class="slide">
    <h1>the traditional way</h1>
  </section>

  <section class="slide">
    <h1>MVC</h1>
  </section>
  
  <section class="slide">
    <h1>Rails made me do it</h1>
  </section>

  <section class="slide">
    <h1>fat model,<br>skinny controller</h1>
    <p>Jamis Buck, 2006</p>
  </section>

  <section class="slide">
    <img class="vcenter" src="http://www.ayearwithoutcandy.com/wp-content/uploads/2010/10/fat-skinny2.jpg">
  </section>
  
  <section class="slide">
    <h1>obese model,<br>not so skinny controller</h1>
  </section>

  <section class="slide">
    <img class="vcenter" src="http://pu.i.wp.pl/k,NjcwMjA5MzQsNDY0MjkwNzk=,f,fat-girls-and-fries.jpg">
  </section>

  <section class="slide">
    <h1>In OOP, everything happens somewhere else</h1>
    <p>Adele Goldberg</p>
  </section>

  <section class="slide">
    <h1>OOP makes the algorithm hard to follow</h1>
  </section>

  <section class="slide">
    <h1>MVC makes the algorithm hard to follow</h1>
  </section>


  
  <section class="slide">
    <img class="vcenter" src="http://25.media.tumblr.com/tumblr_ljfdhvMAVA1qzs32ro1_500.jpg" style="opacity:0.4;">
    <h1>A new hope</h1>
  </section>

  <section class="slide">
    <h1>Data<br>Context<br>Integration</h1>
  </section>
  
  <section class="slide">
    <h2>Data</h2>
    <ul>
      <li class="slide">
        <h3>What the system <strong>is</strong></h3>
      </li>
      <li class="slide">
        <h3>Tends to be stable</h3>
      </li>
      <li class="slide">
        <h3>Boring stuff</h3>
      </li>
      <li class="slide">
        <h3>Used in different contexts!</h3>
        <p class="slide">...which may lead to obesity (in traditional way)</p>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>Context</h2>
    <ul>
      <li class="slide">
        <h3>Provides environment</h3>
      </li>
      <li class="slide">
        <h3>Makes objects play roles</h3>
      </li>
      <li class="slide">
        <h3>Performs use-cases</h3>
        <ul>
          <li class="slide">or scenarios</li>
          <li class="slide">or algorithms</li>
          <li class="slide">or habits</li>
        </ul>
      </li>
    </ul>
  </section>
  
  <section class="slide">
    <h2>Interaction</h2>
    <ul>
      <li class="slide">
        <h3>What the system <strong>does</strong></h3>
      </li>
      <li class="slide">
        <h3>Tends to change rapidly</h3>
      </li>
      <li class="slide">
        <h3>Interesting stuff!</h3>
      </li>
      <li class="slide">
        <h3>Roles interacting with each other</h3>
      </li>
      <li class="slide">
        <h3>Usually not an actual object</h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <div class="vcenter"> 
      <h1>Architecture</h1>
      <h2>The Lost Years</h2>
      <h3>by Uncle Bob Martin</h3>
      <a href="http://www.youtube.com/watch?v=WpkDN78P884">
          http://www.youtube.com/watch?v=WpkDN78P884
      </a>
    </div>
  </section>
  
  <section class="slide">
    <h1>use-cases are your application<span class="slide">,<br>Rails isn't</span></h1>
  </section>
  
  <section class="slide">
    <h2>Architecture according to Uncle Bob</h2>
    <ul>
      <li class="slide">
        <h3>Entity</h3>
        <p>Application-<strong>independent</strong> business rules</p>
      </li>
      <li class="slide">
        <h3>Interactor</h3>
        <p>Application-<strong>specific</strong> business rules</p>
      </li>
      <li class="slide">
        <h3>Delivery mechanism</h3>
        <p>Should be an implementation detail == a plugin</p>
      </li>
      <li class="slide">
        <h3>Persistence</h3>
        <p>Should be an implementation detail == a plugin</p>
      </li>
    </ul>
  </section>
  
  <section class="slide">
    <h2>Architecture according to Uncle Bob &ndash; cont.</h2>
    <ul>
      <li class="slide">
        <h3>Isolated layers</h3>
      </li>
      <li class="slide">
        <h3>Communicating through simple data structures</h3>
      </li>
      <li class="slide">
        <h3>Views so simple there's no point in testing them</h3>
      </li>
      <li class="slide">
        <h3>The database is a detail!</h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h1>Good architecture allows to defer decisions</h1>
  </section>
  
  <section class="slide">
    <h1>...maximizes number of decisions NOT made</h1>
  </section>
  
  <section class="slide">
    <h2>It's Business Time by Jim Gay </h2>
    <ul>
      <li class="slide">
        <h3>Data != Domain</h3>
      </li>
      <li class="slide">
        <h3>separate what is stable and what changes</h3>
      </li>
    </ul>
    <a href="http://www.youtube.com/watch?v=lhFSc0dWsto">
      Presented at wroc_love.rb: http://www.youtube.com/watch?v=lhFSc0dWsto
    </a>
  </section>

  <section class="slide">
    <h2>Object on Rails</h2>
    <ul>
      <li class="slide">
        <h3>DI in Ruby!</h3>
      </li>
      <li class="slide">
        <h3>de-couple as much as possible</h3>
      </li>
      <li class="slide">
        <h3>"lone wolf" anti-pattern</h3>
        <code>Post.find(id)</code>
        vs.
        <code>current_user.blog.posts.find(id)</code>
        <h4 class="slide">
          Coolest anti-pattern name since "shotgun surgery"!
        </h4>
      </li>
      <li class="slide">
        <h3>too much hassle with Exhibits</h3>
      </li>
    </ul>
    <a href="http://objectsonrails.com/">
      a must-read! => objectsonrails.com
    </a>
  </section>

  <section class="slide">
    <img class="vcenter" src="http://25.media.tumblr.com/tumblr_ljfdhvMAVA1qzs32ro1_500.jpg" style="opacity:0.4;">
    <h1>A new hope</h1>
  </section>
  
  <section class="slide">
    <div class="vcenter"> 
      <h1>This will be mainstream in 5 years</h1>
      <h3 class="slide">(except Java)</h3>
    </div>
  </section>
  
  <section class="slide">
    <h1>EXAMPLES!!!</h1>
  </section>
  
  <section class="slide">
    <h1>PROS</h1>
  </section>
  
  <section class="slide">
    <h1>readability: whole algorithm in one place</h1>
  </section>
  
  <section class="slide">
    <h1>dependencies under control</h1>
  </section>
  
  <section class="slide">
    <h1>fast tests</h1>
  </section>

  <section class="slide">
    <pre style="color:#af0;">
$ time rake test:usecases
# Running tests:

.................................

Finished tests in 0.056079s, 588.4556 tests/s, 1676.2068 assertions/s.

33 tests, 94 assertions, 0 failures, 0 errors, 0 skips

real	0m5.284s
user	0m4.243s
sys	0m0.946s
</pre>
  </section>
  
  <section class="slide">
    <pre style="color:#af0;">
$ time rake test:units
# Running tests:

..................................................................................................................................................................

Finished tests in 33.363820s, 4.8855 tests/s, 8.5422 assertions/s.

163 tests, 285 assertions, 0 failures, 0 errors

real	0m51.735s
user	0m43.616s
sys	0m2.795s
</pre>
  </section>
  
  <section class="slide">
    <h1>CONS</h1>
  </section>
  <section class="slide">
    <h1>no Rails goodies</h1>
  </section>
  <section class="slide">
    <h1>tedious requires</h1>
  </section>
  <section class="slide">
    <h1>CONS</h1>
  </section>
  <section class="slide">
    <h1>CONS</h1>
  </section>
  <section class="slide">
    <h2>text</h2>
  </section>


  <section class="slide" id="how-to-overview">
    <h2>How to Make a Deck</h2>
    <ol>
      <li>
        <h3>Write Slides</h3>

        <p>Slide content is simple&nbsp;HTML.</p>
      </li>
      <li>
        <h3>Choose Themes</h3>
        <p>One for slide styles and one for deck&nbsp;transitions.</p>
      </li>

      <li>
        <h3>Include Extensions</h3>
        <p>Add extra functionality to your deck, or leave it stripped&nbsp;down.</p>
      </li>
    </ol>
  </section>

  <section class="slide" id="markup">
    <h2>The Markup</h2>
    <p>Slides are just HTML elements with a class of <code>slide</code>.</p>
    <pre><code>&lt;section class=&quot;slide&quot;&gt;
  &lt;h2&gt;How to Make a Deck&lt;/h2&gt;

  &lt;ol&gt;
    &lt;li&gt;
      &lt;h3&gt;Write Slides&lt;/h3&gt;
      &lt;p&gt;Slide content is simple HTML.&lt;/p&gt;
    &lt;/li&gt;

    &lt;li&gt;
      &lt;h3&gt;Choose Themes&lt;/h3&gt;
      &lt;p&gt;One for slide styles and one for deck transitions.&lt;/p&gt;
    &lt;/li&gt;
    &hellip;

  &lt;/ol&gt;
&lt;/section&gt;</code></pre>
  </section>





  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./deck.js/jquery-1.7.min.js"><\/script>')</script>

  <!-- Deck Core and extensions -->
  <script src="./deck.js/core/deck.core.js"></script>
  <script src="./deck.js/extensions/hash/deck.hash.js"></script>
  <script src="./deck.js/extensions/menu/deck.menu.js"></script>
  <script src="./deck.js/extensions/goto/deck.goto.js"></script>

  <script src="./deck.js/extensions/status/deck.status.js"></script>
  <script src="./deck.js/extensions/navigation/deck.navigation.js"></script>
  <script>
    $(function() {
      $.deck('.slide');
    });
  </script> 
</body>
</html>