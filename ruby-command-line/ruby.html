<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ruby command line</title>
  <meta name="viewport" content="width=1024, user-scalable=no">
  <link rel="stylesheet" href="../deck.js/core/deck.core.css">
  <link rel="stylesheet" href="../deck.js/extensions/goto/deck.goto.css">
  <link rel="stylesheet" href="../deck.js/extensions/menu/deck.menu.css">
  <link rel="stylesheet" href="../deck.js/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" href="../deck.js/extensions/status/deck.status.css">
  <link rel="stylesheet" href="../deck.js/extensions/hash/deck.hash.css">
  <link rel="stylesheet" id="style-theme-link" href="../deck.js/themes/style/mine.css">
  <link rel="stylesheet" id="transition-theme-link" href="../deck.js/themes/transition/fade.css">
  <link rel="stylesheet" href="../deck.js/extensions/codemirror/deck.codemirror.css">
  <link rel="stylesheet" href="../deck.js/extensions/codemirror/themes/night.css">
  <script src="../deck.js/modernizr.custom.js"></script>
  <script src="http://ligature-js.googlecode.com/files/ligature.js"></script>

  <style>
    .slide pre {
      color:#af0;
      font-size: 20px;
    }
    .slide pre.nowrap {
      overflow: auto;
      white-space: pre;
    }
    .deck-container .slide blockquote.smaller {
      font-size: 1.4em;
    }
    .deck-container .slide blockquote.smaller p {
      text-align: right;
    }
    .CodeMirror-gutter {
      display: none;
    }
    body {
      font-variant-ligatures: common-ligatures additional-ligatures;
    }
    .slide h1 > img {
       margin-bottom: 0px
    }
    .opac6 {
      opacity: 0.6;
    }
    .opac4 {
      opacity: 0.4;
    }
    .opac2 {
      opacity: 0.2;
    }
    img.bg {
      /* Set rules to fill background */
      min-height: 100%;
      min-width: 1024px;

      /* Set up proportionate scaling */
      width: 100%;
      height: auto;

      /* Set up positioning */
      position: fixed;
      top: 0;
      left: 0;
      z-index: -100;
    }

    @media screen and (max-width: 1024px) { /* Specific to this particular image */
      img.bg {
        left: 50%;
        margin-left: -512px;   /* 50% */
      }
    }
    .slide strong {
      font-weight: 1000;
    }
    .slide.inverse {
      background-color: white;
    }
    .slide.inverse h1,
    .slide.inverse h2,
    .slide.inverse h3,
    .slide.inverse li {
      color: black;
      text-shadow: 0 0 10px #444;
    }
    .slide.inverse h1.whiteshadow {
      text-shadow: 0 0 10px #fff;
    }
    .slide.inverse .opac6 {
      opacity: 1 !important;
    }
    a {
      font-family: monospace, sans-serif;
    }
    code {
      color: inherit !important;
    }
    code.flickr {
      font-size: 50%;
      text-shadow: 0 0 5px #000;
      position:fixed;
      left:0px;
      bottom:0px;
      height:30px;
      width:100%;
    }
    section.slide pre u {
      color: white;
      font-weight: bold;
    }
    .slide h2 small {
      font-size: 50%;
    }
  </style>
</head>
<body class="deck-container prettify">
  <section class="slide">
    <div class="vcenter">
      <h1>Ruby command line</h1>
      <br>
      <br>
      <h4>Przemysław::Kowalczyk<br> a.k.a. szeryf</h4>
    </div>
  </section>

  <section class="slide">
    <h1>
      ruby -&zwj;-help
    </h1>
  </section>

  <section class="slide">
    <pre class="nowrap">
Usage: ruby [switches] [--] [programfile] [arguments]
  -0[octal]       specify record separator (\0, if no argument)
  -a              autosplit mode with -n or -p (splits $_ into $F)
  -c              check syntax only
  -Cdirectory     cd to directory, before executing your script
  -d              set debugging flags (set $DEBUG to true)
  -e 'command'    one line of script. Several -e's allowed. Omit [programfile]
  -Eex[:in]       specify the default external and internal character encodings
  -Fpattern       split() pattern for autosplit (-a)
  -i[extension]   edit ARGV files in place (make backup if extension supplied)
  -Idirectory     specify $LOAD_PATH directory (may be used more than once)
  -l              enable line ending processing
  -n              assume 'while gets(); ... end' loop around your script
  -p              assume loop like -n but print line also like sed
  -rlibrary       require the library, before executing your script
  -s              enable some switch parsing for switches after script name
  -S              look for the script using PATH environment variable
  -T[level=1]     turn on tainting checks
  -v              print version number, then turn on verbose mode
  -w              turn warnings on for your script
  -W[level=2]     set warning level; 0=silence, 1=medium, 2=verbose
  -x[directory]   strip off text before #!ruby line and perhaps cd to directory
  --copyright     print the copyright
  --version       print the version
    </pre>
  </section>

  <section class="slide">
    <h1>
      lots of cryptic options<span class="slide"><br>...but some look familiar</span>
    </h1>
  </section>

  <section class="slide">
    <pre class="nowrap">
Usage: perl [switches] [--] [programfile] [arguments]
  -0[octal]         specify record separator (\0, if no argument)
  -a                autosplit mode with -n or -p (splits $_ into @F)
  -C[number/list]   enables the listed Unicode features
  -c                check syntax only (runs BEGIN and CHECK blocks)
  -d[:debugger]     run program under debugger
  -D[number/list]   set debugging flags (argument is a bit mask or alphabets)
  -e program        one line of program (several -e's allowed, omit programfile)
  -E program        like -e, but enables all optional features
  -f                don't do $sitelib/sitecustomize.pl at startup
  -F/pattern/       split() pattern for -a switch (//'s are optional)
  -i[extension]     edit <> files in place (makes backup if extension supplied)
  -Idirectory       specify @INC/#include directory (several -I's allowed)
  -l[octal]         enable line ending processing, specifies line terminator
  -[mM][-]module    execute "use/no module..." before executing program
  -n                assume "while (<>) { ... }" loop around program
  -p                assume loop like -n but print line also, like sed
  -P                run program through C preprocessor before compilation
  -s                enable rudimentary parsing for switches after programfile
  -S                look for programfile using PATH environment variable
  -t                enable tainting warnings
  -T                enable tainting checks
  -u                dump core after parsing program
  -U                allow unsafe operations
  -v                print version, subversion (includes VERY IMPORTANT perl info)
  -V[:variable]     print configuration summary (or a single Config.pm variable)
  -w                enable many useful warnings (RECOMMENDED)
  -W                enable all warnings
  -x[directory]     strip off text before #!perl line and perhaps cd to directory
  -X                disable all warnings
    </pre>
  </section>

  <section class="slide">
    <pre class="nowrap">
Usage: perl [switches] [--] [programfile] [arguments]
  <u>-0[octal]         specify record separator (\0, if no argument)</u>
  <u>-a                autosplit mode with -n or -p (splits $_ into @F)</u>
  -C[number/list]   enables the listed Unicode features
  <u>-c                check syntax only (runs BEGIN and CHECK blocks)</u>
  -d[:debugger]     run program under debugger
  <u>-D[number/list]   set debugging flags (argument is a bit mask or alphabets)</u>
  <u>-e program        one line of program (several -e's allowed, omit programfile)</u>
  -E program        like -e, but enables all optional features
  -f                don't do $sitelib/sitecustomize.pl at startup
  <u>-F/pattern/       split() pattern for -a switch (//'s are optional)</u>
  <u>-i[extension]     edit <> files in place (makes backup if extension supplied)</u>
  <u>-Idirectory       specify @INC/#include directory (several -I's allowed)</u>
  <u>-l[octal]         enable line ending processing, specifies line terminator</u>
  -[mM][-]module    execute "use/no module..." before executing program
  <u>-n                assume "while (<>) { ... }" loop around program</u>
  <u>-p                assume loop like -n but print line also, like sed</u>
  -P                run program through C preprocessor before compilation
  <u>-s                enable rudimentary parsing for switches after programfile</u>
  <u>-S                look for programfile using PATH environment variable</u>
  -t                enable tainting warnings
  <u>-T                enable tainting checks</u>
  -u                dump core after parsing program
  -U                allow unsafe operations
  <u>-v                print version, subversion (includes VERY IMPORTANT perl info)</u>
  -V[:variable]     print configuration summary (or a single Config.pm variable)
  <u>-w                enable many useful warnings (RECOMMENDED)</u>
  <u>-W                enable all warnings</u>
  <u>-x[directory]     strip off text before #!perl line and perhaps cd to directory</u>
  -X                disable all warnings
    </pre>
  </section>

  <section class="slide">
    <pre class="nowrap">
Usage: ruby [switches] [--] [programfile] [arguments]
  <u>-0[octal]       specify record separator (\0, if no argument)</u>
  <u>-a              autosplit mode with -n or -p (splits $_ into $F)</u>
  <u>-c              check syntax only</u>
  -Cdirectory     cd to directory, before executing your script
  <u>-d              set debugging flags (set $DEBUG to true)</u>
  <u>-e 'command'    one line of script. Several -e's allowed. Omit [programfile]</u>
  -Eex[:in]       specify the default external and internal character encodings
  <u>-Fpattern       split() pattern for autosplit (-a)</u>
  <u>-i[extension]   edit ARGV files in place (make backup if extension supplied)</u>
  <u>-Idirectory     specify $LOAD_PATH directory (may be used more than once)</u>
  <u>-l              enable line ending processing</u>
  <u>-n              assume 'while gets(); ... end' loop around your script</u>
  <u>-p              assume loop like -n but print line also like sed</u>
  -rlibrary       require the library, before executing your script
  <u>-s              enable some switch parsing for switches after script name</u>
  <u>-S              look for the script using PATH environment variable</u>
  <u>-T[level=1]     turn on tainting checks</u>
  <u>-v              print version number, then turn on verbose mode</u>
  <u>-w              turn warnings on for your script</u>
  -W[level=2]     set warning level; 0=silence, 1=medium, 2=verbose
  <u>-x[directory]   strip off text before #!ruby line and perhaps cd to directory</u>
  --copyright     print the copyright
  --version       print the version
    </pre>
  </section>

  <section class="slide">
    <h2>
      Is Ruby influenced by Perl?
    </h2>
    <blockquote class="smaller" >
      <p>I wanted a scripting language that was more powerful than Perl, and more object-oriented than Python. (...)</p>
      <p>Ruby's class library is an object-oriented reorganization of Perl functionality--plus some Smalltalk and Lisp stuff.</p>
      <p><cite>Yukihiro Matsumoto a.k.a. "Matz"</cite></p>
    </blockquote>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://farm7.staticflickr.com/6074/6064652520_bf51620dcf_b_d.jpg" style="top:-200px;">
    <code class='flickr'>http://www.flickr.com/photos/32513189@N03/6064652520</code>
    <h1>
      basic options
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby --version</code>
      <br>
      <code>ruby -v</code>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ cat version.rb 
puts RUBY_VERSION

$ ruby version.rb 
1.9.3

$ ruby -&zwj;-version
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin10.8.0]

$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin10.8.0]
    </textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -c</code>
      <br>
      <code>ruby -w</code>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ cat warnings.rb 
a = 1
3.times {|a| 
  puts (a)
}

$ ruby -c warnings.rb 
Syntax OK

$ ruby -cw warnings.rb 
warnings.rb:2: warning: shadowing outer local variable - a
warnings.rb:3: warning: (...) interpreted as grouped expression
Syntax OK

$ ruby -w warnings.rb 
warnings.rb:2: warning: shadowing outer local variable - a
warnings.rb:3: warning: (...) interpreted as grouped expression
0
1
2
    </textarea>
  </section>

  <section class="slide">
    <h1>
      <small>TextMate's Ruby bundle runs<br> <code>ruby -cw</code><br> on save</small>
    </h1>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://farm2.staticflickr.com/1060/1398914855_46aa8ccdb9_b_d.jpg" style="top:-200px;">
    <code class='flickr'>http://www.flickr.com/photos/kenb/1398914855</code>
    <h1>
      slightly advanced options
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -e 'command'</code>
      <br><small>one line of script. Several -e's allowed. Omit [programfile]</small>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -e 'f=[0,1];15.times{f&lt;&lt;f[-1]+f[-2]};p f'
[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987]</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -Idirectory</code>
      <br>
      <small>specify $LOAD_PATH directory (may be used more than once)</small>
      <br>
      <code>ruby -rlibrary</code>
      <br>
      <small>require the library, before executing your script</small>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -I.:lib:test -rubygems -e \
  "%w[test/unit test/unit/project_test.rb].each { |f| require f }"
  
$ ruby -I.:lib:test -rubygems \
  -rtest/unit -rtest/unit/project_test.rb -e ''
    </textarea>
  </section>

  <section class="slide">
    <h1>
      <small><strong>Fun fact #1:</strong><br>
      <code>require 'ubygems'</code> actually works!</small>
    </h1>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://farm2.staticflickr.com/1328/865858309_5c0f52dad1_b_d.jpg" style="opacity:0.95 !important">
    <code class='flickr'>http://www.flickr.com/photos/andrewdewolfe/865858309</code>
    <h1>
      moderately convoluted options
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -s</code>
      <small>enable some switch parsing for switches after script name (does not work with <code>-e</code>)</small>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ cat s-opt.rb 
#!ruby -s
p xyz: $xyz
p val: $val
p i_can_haz_hyphens: $i_can_haz_hyphens
p ARGV: ARGV

$ ruby ./s-opt.rb -xyz -val=123 -i-can-haz-hyphens
{:xyz=>true}
{:val=>"123"}
{:i_can_haz_hyphens=>true}
{:ARGV=>[]}

$ ruby ./s-opt.rb -xyz -&zwj;- -val=123 -i-can-haz-hyphens
{:xyz=>true}
{:val=>nil}
{:i_can_haz_hyphens=>nil}
{:ARGV=>["-val=123", "-i-can-haz-hyphens"]}    </textarea>
  </section>

  <section class="slide">
    <h2>
      Might be actually useful...
      <code>my-script.rb -verbose</code>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
#!ruby -s

log "some message" if $verbose
</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -Cdirectory</code>
      <small>cd to directory, before executing your script</small>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ls
src/  lib/  doc/  ext/

$ for x in */ ; do ruby -C$x clean.rb ; done
src-cleaning /path/to/src/
lib-cleaning /path/to/lib/
doc-cleaning /path/to/doc/
ext-cleaning /path/to/ext/

$ for x in */ ; do ruby -C$x /path/to/clean.rb ; done
cleaning /path/to/src/
cleaning /path/to/lib/
cleaning /path/to/doc/
cleaning /path/to/ext/
</textarea>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://farm5.staticflickr.com/4116/4895929410_916beccd16_b_d.jpg" style="top:-150px">
    <code class='flickr'>http://www.flickr.com/photos/alykat/4895929410</code>
    <h1 class="whiteshadow">
      higher driving school
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -n</code>
      <small>assume 'while gets(); ... end' loop around your script</small>
    </h2>
    <textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -ne 'print if $..even?' < s-opt.rb
p xyz: $xyz
p i_can_haz_hyphens: $i_can_haz_hyphens

$ ruby -ne 'print if /xyz/' s-opt.rb 
p xyz: $xyz
    </textarea>
  </section>

  <section class="slide">
    <h2>
      How does it work?
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -ne 'print if $..even?' s-opt.rb
</textarea>
<p class="slide">
becomes
<textarea class="code" mode="ruby" style="display: none;" theme="night">
while gets
  print if $..even?
end
</textarea>
</p><p class="slide">
which is equivalent to
<textarea class="code" mode="ruby" style="display: none;" theme="night">
ARGF = ARGV.empty? ? STDIN : read_all_args_as_one_stream
$. = 0
while $_ = gets(ARGF)
  $. += 1
  print $_ if $..even?
end</textarea>
</p>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -p</code>
      <small>assume loop like -n but print line also like sed</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ cat s-opt.rb 
#!ruby -s
p xyz: $xyz
p val: $val
p i_can_haz_hyphens: $i_can_haz_hyphens
p ARGV: ARGV

$ ruby -pe 'gsub(/(\w+):/) { ":#{$1} =>" }' s-opt.rb
#!ruby -s
p :xyz => $xyz
p :val => $val
p :i_can_haz_hyphens => $i_can_haz_hyphens
p :ARGV => ARGV</textarea>
  </section>

  <section class="slide">
    <h2>
      How does it work?
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe 'gsub(/(\w+):/) { ":#{$1} =>" }' s-opt.rb</textarea>
becomes
<textarea class="code" mode="ruby" style="display: none;" theme="night">
while $_ = gets
  $_ = $_.gsub(/(\w+):/) { ":#{$1} =>" }
  print $_
end</textarea>
* <code>gsub(...){...}</code> does not work with <code>-n</code> on Ruby MRI 1.9.3, works on 1.8.7
  </section>

  <section class="slide">
    <h1>
      <small>Ruby defines special versions of <code>chomp</code>, <code>chop</code>, <code>gsub</code>, <code>sub</code> in loop mode</small>
    </h1>
  </section>

  <section class="slide">
    <h2>
      More examples
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe puts file.txt</textarea>
<div class='slide'>Inserts empty line before each line
<br><br>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe '$\="\n"' file.txt</textarea>
<div class='slide'>Inserts empty line after each line
<br><br>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe 'gsub(/\s+$/, $/)' file.txt  </textarea>
<div class='slide'>Strip trailing whitespace from each line
<br><br>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe 'exit if $. > 10' file.txt  </textarea>
<div class='slide'>Print first 10 lines of file.
</div>
</div>
</div>
</div>

  </section>

  <section class="slide">
    <h2>
      Even more examples
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">$ ruby -ne 'print if /<body>/../<\/body>/' index.html 
  <body>
    <a href="refactoring-to-use-cases/uc.html">Refactoring to use-cases</a>
    <a href="ruby-command-line/ruby.html">Ruby command line</a>
  </body></textarea>
<div class='slide'>Print lines between line containing <code>&lt;body></code> and line containing <code>&lt;/body></code>
<br><br>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe '$_.tr!"a-zA-Z","n-za-mN-ZA-M"' s-opt.rb 
#!ehol -f
c klm: $klm
c iny: $iny
c v_pna_unm_ulcuraf: $v_pna_unm_ulcuraf
c NETI: NETI
</textarea>
<div class='slide'>ROT13 like a (Ruby) boss!
</div>
</div>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -l</code>
      <small>enable line ending processing</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -pe '$_.reverse!' s-opt.rb 

s- ybur!#
zyx$ :zyx p
lav$ :lav p
snehpyh_zah_nac_i$ :snehpyh_zah_nac_i p
VGRA :VGRA p$
$ ruby -lpe '$_.reverse!' s-opt.rb 
s- ybur!#
zyx$ :zyx p
lav$ :lav p
snehpyh_zah_nac_i$ :snehpyh_zah_nac_i p
VGRA :VGRA p</textarea>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://upload.wikimedia.org/wikipedia/commons/f/f3/Ost%C5%99ihom%2C_Kerekt%C3%B3%2C_turistick%C3%BD_rozcestn%C3%ADk.JPG" style="top:-200px">
    <code class='flickr'>source:wikipedia</code>
    <h1 class="whiteshadow">
      ninjas only
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -a</code>
      <small>autosplit mode with -n or -p (splits $_ into $F)</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -nae 'puts $F[1] if $F[0]=="127.0.0.1"' /etc/hosts
localhost
local.dev
backend.dev
frontend.dev</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -Fpattern</code>
      <small>split() pattern for autosplit&nbsp;(-a)</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -naF: -e 'puts $F[0] if $F[4]=~/server/i' /etc/passwd 
_postfix
_pcastserver
_www
_cvs
_svn
_mysql</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>BEGIN</code> &amp; <code>END</code> blocks
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -nae 'BEGIN{c = w = 0}; c += $_.size; w += $F.size; \
END{ printf "%8d%8d%8d %s\n", $., w, c, $FILENAME }' s-opt.rb
       5      14      87 s-opt.rb
$ wc s-opt.rb
       5      14      87 s-opt.rb</textarea>
  </section>

  <section class="slide">
    <h2>
      More fun with <code>BEGIN</code> &amp; <code>END</code>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">$ cat example.csv 
First name;Last name;Email
Przemek;Kowalczyk;szeryf74@gmail.com
John;Doe;jdoe@example.com

$ ruby -F\; -nale 'BEGIN{puts "<table>"; t=:th}; 
puts " <tr>", $F.map{|c|"  <#{t}>#{c}</#{t}>"}, " </tr>"; 
t=:td; END{puts "</table>"}' example.csv 
<table>
 <tr>
  <th>First name</th>
  <th>Last name</th>
  <th>Email</th>
 </tr>
 <tr>
  <td>Przemek</td>
  <td>Kowalczyk</td>
  <td>szeryf74@gmail.com</td>
 </tr>
 <tr>
  <td>John</td>
  <td>Doe</td>
  <td>jdoe@example.com</td>
 </tr>
</table>
</textarea>
  </section>

  <section class="slide inverse">
    <img class="bg" src="http://upload.wikimedia.org/wikipedia/commons/7/7c/Szlaki_wilkanowska.jpg" style="">
    <code class='flickr'>source:wikipedia</code>
    <h1 class="whiteshadow">
      you've got to be kidding
    </h1>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -0[octal]</code>
      <small>specify record separator (<code>\0</code>,&nbsp;if no argument)</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ find . -iname \*.rb -print0 | ruby -pl0e '$_.upcase!'
./CLEAN.RB
./S-OPT.RB
./VERSION.RB
./WARNINGS.RB</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -0777</code>
      <small>read whole file at once as a single string</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -n0777ae 'h=Hash.new(0); $F.each{|w|h[w.downcase]+=1};
puts h.to_a.sort_by(&amp;:last).last(5)' file.txt 
się
52
jest
54
nie
58
to
63
w
85</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -00</code>
      <small>read file in paragraph mode</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ cat -> file.txt
This should all be on one line 
since it's one sentence.

This is a new paragraph that
should be separate.

$ ruby -l00pe 'gsub(/\s*\n/, " ")' file.txt 
This should all be on one line since it's one sentence. 
This is a new paragraph that should be separate.

$ ruby -00lpe 'gsub(/\s*\n/, " ")' file.txt 
This should all be on one line since it's one sentence. 

This is a new paragraph that should be separate.

</textarea>
  </section>

  <section class="slide">
    <h2>
      Mastering <code>-l</code>-fu &amp; <code>-0</code>jitsu
    </h2>
    <ul>
      <li>
        <h3><code>$/</code> is input record separator. </h3>
        Default value is <code>"\n"</code>. Set by <code>-0</code> option.
      </li>
      <li>
        <h3><code>$\</code> is output record separator. </h3>
        Appended to <code>Kernel.print</code> output if non‐<code>nil</code>. Default value is <code>nil</code>.
      </li>
      <li>
        <h3><code>-l</code> means <code>$\ = $/</code></h3>
      </li>
      <li>
        <h3><code>-0</code> means <code>$/ = "\0"</code></h3>
        or whatever is the argument to <code>-0</code>
      </li>
      <li>
        <h3><code>-l00</code> means <code>$\ = $/; $/ = "\n\n"</code></h3>
      </li>
      <li>
        <h3><code>-00l</code> means <code>$/ = "\n\n"; $\ = $/</code></h3>
      </li>
    </ul>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -i[extension]</code>
      <small>edit ARGV files in place (make backup if extension supplied)</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -i -pe 'gsub(/(\w+):/) { ":#{$1} =>" }' s-opt.rb

$ cat s-opt.rb 
#!ruby -s
p :xyz => $xyz
p :val => $val
p :i_can_haz_hyphens => $i_can_haz_hyphens
p :ARGV => ARGV</textarea>
  </section>

  <section class="slide">
    <h2>
      <code>ruby -i[extension]</code>
      <small>edit ARGV files in place (make backup if extension supplied)</small>
    </h2>
<textarea class="code" mode="ruby" style="display: none;" theme="night">
$ ruby -i.bak -pe 'gsub(/:(\w+) =>/) { "#{$1}:" }' s-opt.rb

$ cat s-opt.rb
#!ruby -s
p xyz: $xyz
p val: $val
p i_can_haz_hyphens: $i_can_haz_hyphens
p ARGV: ARGV

$ cat s-opt.rb.bak 
#!ruby -s
p :xyz => $xyz
p :val => $val
p :i_can_haz_hyphens => $i_can_haz_hyphens
p :ARGV => ARGV</textarea>
  </section>








  <section class="slide inverse">
    <img class="bg" src="http://upload.wikimedia.org/wikipedia/commons/e/e0/Szlak_na_wychodek.JPG" style="">
    <code class='flickr'>source:wikipedia</code>
    <h1 class="whiteshadow">
      Thank you!
      <br>
      <br>
      Questions?
    </h1>
  </section>

  <section class="slide">
    <h2>Where do I find...</h2>
    <ul>
      <li>
        <h3>This presentation</h3>
        <a href="http://szeryf.github.com/ruby-command-line/ruby.html">
          http://szeryf.github.com/ruby-command-line/ruby.html
        </a>
      </li>
      <li>
        <h3>My github account</h3>
        <a href="http://github.com/szeryf">
          http://github.com/szeryf
        </a>
      </li>
      <li>
        <h3>My <em>almost defunct</em> blog</h3>
        <a href="http://szeryf.wordpress.com/">
          http://szeryf.wordpress.com/
        </a>
      </li>
    </ul>
  </section>

  <form action="." method="get" class="goto-form">
    <label for="goto-slide">Go to slide:</label>
  	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
  	<datalist id="goto-datalist"></datalist>
  	<input type="submit" value="Go">
  </form>

  <p class="deck-status">
  	<span class="deck-status-current"></span>
  	/
  	<span class="deck-status-total"></span>
  </p>
  
  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="../deck.js/jquery-1.7.min.js"><\/script>')</script>

  <!-- Deck Core and extensions -->
  <script src="../deck.js/core/deck.core.js"></script>
  <script src="../deck.js/extensions/hash/deck.hash.js"></script>
  <script src="../deck.js/extensions/menu/deck.menu.js"></script>
  <script src="../deck.js/extensions/goto/deck.goto.js"></script>

  <script src="../deck.js/extensions/status/deck.status.js"></script>
  <script src="../deck.js/extensions/navigation/deck.navigation.js"></script>
  <!-- Base codemiror code -->
  <script src="../deck.js/extensions/codemirror/codemirror.js"></script>

  <!-- Syntax highlighting Modes see https://github.com/iros/deck.js-codemirror -->
  <!-- javascript -->
  <script src="../deck.js/extensions/codemirror/mode/javascript/javascript.js"></script>

  <!-- html mode (note html mode requires xml, css and javascript) -->
  <script src="../deck.js/extensions/codemirror/mode/xml/xml.js"></script>
  <script src="../deck.js/extensions/codemirror/mode/css/css.js"></script>
  <script src="../deck.js/extensions/codemirror/mode/htmlmixed/htmlmixed.js"></script>

  <!-- ruby -->
  <script src="../deck.js/extensions/codemirror/mode/ruby/ruby.js"></script>

  <!-- Plugin code -->
  <script src="../deck.js/extensions/codemirror/deck.codemirror.js"></script>

  <script src="http://jsprettify.googlecode.com/files/jsprettify-all-latest.js"></script>

  <script>
    $(function() {
      $.deck('.slide');
    });
    $(document).ready(function () {
      window.jsprettify.run();
    });
  </script>
</body>
</html>